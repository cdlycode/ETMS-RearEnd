<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.group8.dao.OutlineDao">
    <resultMap id="outlineCatalog" type="com.group8.entity.EtmsCatalog">
        <result property="catalogName" column="catalog"/>
        <collection property="classFileList" column="train_class_title" ofType="com.group8.entity.EtmsClassFile">
            <result property="classTitle" column="train_class_title"/>
        </collection>
    </resultMap>

    <insert id="addOne" >
        insert into  etms_outline(item_id,catalog,train_class_title)
        values
        <foreach collection="outlines" item="outline" separator=",">
            (#{outline.itemId},#{outline.catalog},#{outline.trainClassTitle})
        </foreach>
    </insert>

    <select id="findCatalog" parameterType="int" resultMap="outlineCatalog">
        select distinct catalog, train_class_title from etms_outline where catalog in
        (select distinct catalog from etms_outline where item_id = #{id})
    </select>
    <update id="uploadClassFile">
        update etms_outline set train_class_file = #{filePath} where outline_id = #{id}
    </update>


    <update id="uploadFile">
        update etms_outline set train_class_file = #{filePath},train_hour=#{trainHour} where outline_id = #{id}
    </update>


</mapper>
